import{j as r,r as p}from"./index.1.sha256-491025a480.js";import{o as $}from"./yup.1.sha256-7565e34740.js";import{c as k}from"./index.1.sha256-2204be5363.js";import{u as z}from"./index.esm.1.sha256-6f50330ddf.js";import{a as O}from"./js.cookie.1.sha256-b274c81169.js";import{c as Z,a as V}from"./array.1.sha256-899a6845d3.js";import{a as M}from"./index.1.sha256-7c8094d5f3.js";import{w,C as U,c as R,D as B,E as H}from"./utils.1.sha256-9ee1c54c60.js";import{g as W,h as q}from"./tracking.1.sha256-c760b2e67b.js";import"./internal_customer_edit_inner.1.sha256-34481b9084.js";import{s as G,A as J}from"./notifications.1.sha256-22ce999815.js";import{e as K}from"./validation.1.sha256-5c3897149a.js";import{E as Q}from"./EmailInputController.1.sha256-47b4940056.js";import{Z as X}from"./ZipInputController.1.sha256-f772024f7c.js";import{S as Y}from"./Spinner.1.sha256-b63f390a52.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="71e1ab9b-917b-4a0f-8d46-23089021f725",e._sentryDebugIdIdentifier="sentry-dbid-71e1ab9b-917b-4a0f-8d46-23089021f725")}catch{}const he=e=>{w("phoneNumber",e)},ee=e=>{w("email",e),W(e)},te=async(e,a=null,d=!1)=>{const o=U();a&&(o.campaignCode=a);const{email:i,phoneNumber:m}=e,n=(await M.post("/customers/api/lead-customer/",{email:i,phoneNumber:m,leadAcquisitionData:o,setSmsOptIn:d},{headers:R()})).data;return q(n.uid,n.email,n.phoneNumber),n},h={emailAddress:K,zipCode:Z().matches(/^[0-9]{5}$|^$/,"Please enter a valid ZIP code.")},S=({extraOnButtonClick:e,formAction:a,formActionOutOfService:d,id:o="hero-input-form",inputType:i="emailAddress",onSubmitSuccess:m,shouldRequireEmailValidation:l=!1,supportedZIPs:n})=>{const[y,A]=p.useState(!1),E=t=>{A(!t)},c=i==="emailAddress",{control:f,formState:b,getValues:x,handleSubmit:C,setError:I}=z({mode:"onSubmit",resolver:$(V().shape({[i]:c&&l?h[i].required("Please enter your email address"):h[i]}))}),g=async t=>{let u=a;if(c){const s=t.emailAddress;if(B(s)){ee(s);try{await te({email:s})}catch(N){N.response.data.email?I("emailAddress",{type:"custom",message:"Looks like youâ€™re already a Rinse customer."}):G('Oops! Something went wrong on our end. Please try again later or contact <a href="mailto:care@rinse.com" class="link--underline">care@rinse.com</a> for assistance.',J.Danger);return}}}else{const{zipCode:s}=t;s&&(H("zipCode",s),O.set("zip_code",s),y&&(u=d))}if(m)m();else if("emailAddress"in t){const s=new URL(u,window.location.origin);s.searchParams.set("email_address",t.emailAddress),window.location.href=s.toString()}else window.location.href=u},L=t=>{"emailAddress"in t&&!l&&g(x())},j=l||b.errors.emailAddress?.type==="custom",D=()=>c?r.jsx(Q,{control:f,defaultValue:"",label:"Enter email to get started",name:"emailAddress",id:`${o}-email-input`,responsive:!0,showErrorWithoutTouch:j,withBorder:!0,testId:`${o}-email-input`}):r.jsx(X,{control:f,defaultValue:"",label:"Enter your ZIP code",name:"zipCode",onChangeServiceable:E,id:`${o}-zip-input`,responsive:!0,showDefaultMessage:!0,supportedZIPs:n,withBorder:!0,withServiceableMessage:!0}),{isSubmitted:F,isSubmitting:P,isSubmitSuccessful:T}=b,[_,v]=p.useState(P||F&&T);return p.useEffect(()=>{window.addEventListener("pageshow",t=>{t.persisted&&v(!1)})},[]),r.jsx(r.Fragment,{children:r.jsxs("form",{id:o,className:"landing-input-form",noValidate:!0,onSubmit:C(g,L),children:[D(),r.jsx("button",{"aria-label":"Continue",className:k("rinse-button--primary-new","form-button--inline","landing-input-form__button"),"data-testid":`${o}-submit-button`,id:`${o}-submit-button`,onClick:e,type:"submit",children:_?r.jsx(Y,{}):r.jsx("span",{className:"rinse-icon--arrow-right","aria-hidden":"true"})})]})})},we=e=>r.jsx(S,{...e,inputType:"zipCode"}),Se=e=>r.jsx(S,{...e,inputType:"emailAddress"});export{we as L,Se as a,he as b,te as c,ee as s};
//# sourceMappingURL=LandingForm.1.sha256-10624e9ea6.js.map
